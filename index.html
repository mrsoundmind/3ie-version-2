<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Resources | 3ie Impact</title>
    <meta name="description"
        content="Access high-quality evidence, datasets, and tools for researchers and policymakers.">
    <meta name="keywords" content="development evidence, research, policymakers, datasets, impact evaluation">

    <!-- Standard React CDNs with Crossorigin -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.9/dist/chart.umd.min.js"></script>

    <script>
        // Prevent Chart.js from clashing
        const ChartJS = window.Chart;

        // --- GLOBAL ERROR LOGGER ---
        window.onerror = function (message, source, lineno, colno, error) {
            const errorContainer = document.getElementById('error-overlay') || document.createElement('div');
            errorContainer.id = 'error-overlay';
            errorContainer.style.position = 'fixed';
            errorContainer.style.top = '0';
            errorContainer.style.left = '0';
            errorContainer.style.width = '100%';
            errorContainer.style.background = '#fee2e2'; // Red-100
            errorContainer.style.color = '#991b1b'; // Red-800
            errorContainer.style.padding = '20px';
            errorContainer.style.zIndex = '9999';
            errorContainer.style.fontFamily = 'monospace';
            errorContainer.style.borderBottom = '1px solid #7f1d1d';
            errorContainer.innerHTML += `<div><strong>Error:</strong> ${message} <br/><small>${source}:${lineno}:${colno}</small></div>`;
            document.body.prepend(errorContainer);
        };

        window.addEventListener('unhandledrejection', function (event) {
            window.onerror("Unhandled Promise Rejection: " + event.reason, "Promise", 0, 0, event.reason);
        });
    </script>

    <!-- Fonts: Open Sans (professional, clean, commonly used by international orgs) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">

    <style type="text/tailwindcss">
        @layer theme {
        :root {
            --primary-blue: #153A80; /* 3ie Brand Blue (Dark) */
            --primary-dark: #00449E;
            --secondary-bg: #F3F7FF; /* Light Blue Background */
            --text-dark: #1A1A1A;
            --text-gray: #4A5568;
        }
    }

    @layer base {
        body {
            font-family: 'Open Sans', sans-serif;
            color: var(--text-dark);
            -webkit-font-smoothing: antialiased;
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Open Sans', sans-serif;
        }
    }

    @layer components {
        .btn {
            @apply inline-flex items-center justify-center px-6 py-3 rounded-md font-semibold transition-colors duration-200;
        }
        .btn-primary {
            @apply bg-[var(--primary-blue)] text-white hover:bg-[var(--primary-dark)];
        }
        .btn-outline {
            @apply border-2 border-[var(--primary-blue)] text-[var(--primary-blue)] hover:bg-[var(--secondary-bg)];
        }
        .container-custom {
            @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
        }
        
        .bg-grid-pattern {
            background-image: radial-gradient(#CBD5E0 1px, transparent 1px);
            background-size: 24px 24px;
        }
        
        /* Custom Scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #cbd5e0;
            border-radius: 3px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #a0aec0;
        }

        /* Animations */
        @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes scale-up {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes bounce-subtle {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-3px); }
        }
        @keyframes slide-up {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-fade-in {
            animation: fade-in 0.3s ease-out forwards;
        }
        .animate-scale-up {
            animation: scale-up 0.4s ease-out forwards;
        }
        .animate-bounce-subtle {
            animation: bounce-subtle 2s infinite ease-in-out;
        }
        .animate-slide-up {
            animation: slide-up 0.5s ease-out forwards;
        }

        /* High-End Animations */
        @keyframes marquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        @keyframes slow-spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .animate-marquee {
            animation: marquee 30s linear infinite;
        }
        .animate-float {
            animation: float 6s ease-in-out infinite;
        }
        .animate-slow-spin {
            animation: slow-spin 20s linear infinite;
        }
    }
    </style>

</head>

<body class="bg-white">
    <div id="root"></div>
    <script type="text/babel" data-presets="react,stage-3">
        // --- 0. Global React ---
        const { React, ReactDOM } = window;

        // --- 1. Resources Data ---
        window.resourcesData = [
            {
                id: 1,
                title: "Development Evidence Portal",
                description: "The world's most comprehensive repository of impact evaluations and systematic reviews in international development.",
                longDescription: null, // Using iframe instead
                category: ["Databases"],
                audience: ["For Researchers", "For Policymakers", "For Donors", "For NGOs"],
                icon: "database",
                featured: true,
                url: "https://developmentevidence.3ieimpact.org",
                totalPages: 12400,
                useIframe: true
            },
            {
                id: 2,
                title: "Evidence Gap Maps",
                description: "Visual tools that map existing evidence and identify gaps where more research is needed.",
                longDescription: `
                    <div class="space-y-6">
                        <p class="text-lg text-gray-700 leading-relaxed">Evidence Gap Maps (EGMs) are thematic collections of evidence that show what we know and do not know about development interventions.</p>
                        <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?auto=format&fit=crop&w=800&q=80" alt="Gap Map Example" class="w-full h-48 object-cover rounded-xl shadow-sm" />
                        <div>
                            <h4 class="font-bold text-gray-900 mb-2">Available Maps</h4>
                            <ul class="space-y-3">
                                <li class="flex items-start gap-3">
                                    <span class="flex-shrink-0 w-1.5 h-1.5 rounded-full bg-blue-500 mt-2"></span>
                                    <span class="text-gray-600"><strong>Science, Technology and Innovation:</strong> Mapping evidence on STI interventions.</span>
                                </li>
                                <li class="flex items-start gap-3">
                                    <span class="flex-shrink-0 w-1.5 h-1.5 rounded-full bg-blue-500 mt-2"></span>
                                    <span class="text-gray-600"><strong>Food Systems:</strong> Evidence on food security and nutrition.</span>
                                </li>
                                <li class="flex items-start gap-3">
                                    <span class="flex-shrink-0 w-1.5 h-1.5 rounded-full bg-blue-500 mt-2"></span>
                                    <span class="text-gray-600"><strong>Social Protection:</strong> Interventions for vulnerable populations.</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                `,
                category: ["Tools and methods"],
                audience: ["For Researchers", "For Policymakers"],
                icon: "map",
                featured: true,
                url: "https://www.3ieimpact.org/evidence-hub/evidence-gap-maps",
                totalPages: 45,
                useIframe: false
            },
            {
                id: 3,
                title: "Impact Evaluation Glossary",
                description: "A searchable database of terms and definitions used in impact evaluation and social research.",
                longDescription: `
                    <div class="space-y-6">
                         <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-100 text-sm text-yellow-800 mb-4">
                            <div class="font-bold mb-1">Quick Tip</div>
                            Use this glossary to standardize terminology in your research proposals.
                        </div>
                        <p class="text-gray-600">Clear definitions are the bedrock of rigorous research. This glossary provides standard definitions for technical terms used in quantitative and qualitative impact evaluation.</p>
                        <div class="border rounded-lg overflow-hidden">
                            <div class="bg-gray-50 px-4 py-2 border-b font-mono text-xs text-gray-500">Preview terms</div>
                            <div class="divide-y divide-gray-100">
                                <div class="p-4">
                                    <span class="font-bold text-gray-900 block mb-1">Counterfactual</span>
                                    <span class="text-gray-600 text-sm">What would have happened to the participants in a program had they not participated.</span>
                                </div>
                                <div class="p-4">
                                    <span class="font-bold text-gray-900 block mb-1">Randomized Controlled Trial (RCT)</span>
                                    <span class="text-gray-600 text-sm">An impact evaluation design in which random assignment is used to allocate the intervention.</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `,
                category: ["Learning and reference"],
                audience: ["For Researchers", "For Students"],
                icon: "book-a",
                featured: false,
                url: "https://www.3ieimpact.org/resources/Glossaries",
                totalPages: 150,
                useIframe: false
            },
            {
                id: 4,
                title: "RIDIE Registry",
                description: "The Registry for International Development Impact Evaluations (RIDIE) promotes transparency and high-quality research.",
                longDescription: `
                    <div class="space-y-6">
                        <div class="flex items-center gap-4 mb-4">
                            <div class="w-16 h-16 bg-indigo-50 rounded-full flex items-center justify-center text-indigo-600 font-bold text-2xl">R</div>
                            <div>
                                <h3 class="text-lg font-bold text-gray-900">RIDIE</h3>
                                <p class="text-sm text-gray-500">Registry for International Development Impact Evaluations</p>
                            </div>
                        </div>
                        <p class="text-gray-700">RIDIE is a prospective registry of impact evaluations related to development in low- and middle-income countries. Registration helps avoid publication bias and improves the transparency of research findings.</p>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4">
                            <a href="#" class="block p-4 border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors group">
                                <div class="font-bold text-gray-900 group-hover:text-blue-700">Register a Study</div>
                                <div class="text-xs text-gray-500 mt-1">Submit your evaluation design</div>
                            </a>
                            <a href="#" class="block p-4 border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors group">
                                <div class="font-bold text-gray-900 group-hover:text-blue-700">Search Registry</div>
                                <div class="text-xs text-gray-500 mt-1">Browse ongoing evaluations</div>
                            </a>
                        </div>
                    </div>
                `,
                category: ["Databases"],
                audience: ["For Researchers", "For Donors"],
                icon: "clipboard-list",
                featured: false,
                url: "https://www.3ieimpact.org/resources/ridie",
                totalPages: 890,
                useIframe: false
            },
            {
                id: 5,
                title: "PIR Methods Menu",
                description: "A comprehensive menu of methods for Policy, Influence, and Research (PIR) effectiveness.",
                longDescription: `
                    <div class="space-y-8">
                        <p class="text-lg text-gray-700 leading-relaxed">
                            This resource provides a detailed menu of various methods used to evaluate policy influence and research uptake. It serves as a guide for selecting the most appropriate evaluation tools for your context.
                        </p>
        
                        <div class="grid gap-6 md:grid-cols-2">
                            <div class="bg-gray-50 p-5 rounded-xl border border-gray-100">
                                <h4 class="font-bold text-gray-900 mb-2">Adaptive Management</h4>
                                <p class="text-sm text-gray-600">A general term for a set of approaches that incorporate feedback loops and iterative adaptation into program implementation.</p>
                            </div>
                            
                            <div class="bg-gray-50 p-5 rounded-xl border border-gray-100">
                                <h4 class="font-bold text-gray-900 mb-2">Agent-Based Modeling</h4>
                                <p class="text-sm text-gray-600">A computational simulation of interactions between a defined set of actors or "agents" in order to understand dynamics influencing outcomes in a system.</p>
                            </div>
        
                            <div class="bg-gray-50 p-5 rounded-xl border border-gray-100">
                                <h4 class="font-bold text-gray-900 mb-2">Case Studies</h4>
                                <p class="text-sm text-gray-600">A descriptive analysis of a 'bounded' program, event, activity, or individuals over time through detailed, in-depth data collection.</p>
                            </div>
        
                            <div class="bg-gray-50 p-5 rounded-xl border border-gray-100">
                                <h4 class="font-bold text-gray-900 mb-2">Contribution Analysis</h4>
                                <p class="text-sm text-gray-600">A confirmatory evaluation approach that assesses a policy or reform's contribution to outcomes or observed changes.</p>
                            </div>
        
                            <div class="bg-gray-50 p-5 rounded-xl border border-gray-100">
                                <h4 class="font-bold text-gray-900 mb-2">Cost-Benefit Analysis</h4>
                                <p class="text-sm text-gray-600">Compares a policy's expected costs and benefits, usually prior to implementation, to decide if the policy is 'worth' implementation.</p>
                            </div>
        
                            <div class="bg-gray-50 p-5 rounded-xl border border-gray-100">
                                <h4 class="font-bold text-gray-900 mb-2">Experimental Approaches (RCTs)</h4>
                                <p class="text-sm text-gray-600">Creates comparable groups that participate in a policy vs. those that do not, in order to attribute changes in outcomes to the policy.</p>
                            </div>
                            
                            <div class="bg-gray-50 p-5 rounded-xl border border-gray-100">
                                <h4 class="font-bold text-gray-900 mb-2">Network Mapping</h4>
                                <p class="text-sm text-gray-600">A participatory approach designed to help people identify, visualize, discuss, and influence key actors and interrelationships.</p>
                            </div>
        
                            <div class="bg-gray-50 p-5 rounded-xl border border-gray-100">
                                <h4 class="font-bold text-gray-900 mb-2">Outcome Harvesting</h4>
                                <p class="text-sm text-gray-600">An approach focusing on collecting evidence of changes and working backwards to determine how an intervention may have contributed to these changes.</p>
                            </div>
        
                            <div class="bg-gray-50 p-5 rounded-xl border border-gray-100">
                                <h4 class="font-bold text-gray-900 mb-2">Process Tracing</h4>
                                <p class="text-sm text-gray-600">Test and refine a theory by observing how the policy or reform worked in a single case.</p>
                            </div>
        
                            <div class="bg-gray-50 p-5 rounded-xl border border-gray-100">
                                <h4 class="font-bold text-gray-900 mb-2">Realist Evaluation</h4>
                                <p class="text-sm text-gray-600">A theory-driven approach that analyzes programs based on configurations of context, causal mechanisms, and outcomes.</p>
                            </div>
                            
                            <div class="bg-gray-50 p-5 rounded-xl border border-gray-100">
                                <h4 class="font-bold text-gray-900 mb-2">Social Network Analysis</h4>
                                <p class="text-sm text-gray-600">An analytical approach to identify and characterize social structures and relationships through networks and graph theory.</p>
                            </div>
        
                            <div class="bg-gray-50 p-5 rounded-xl border border-gray-100">
                                <h4 class="font-bold text-gray-900 mb-2">Systematic Review</h4>
                                <p class="text-sm text-gray-600">A synthesis of research evidence on a clearly defined topic using rigorous, repeatable methods.</p>
                            </div>
                        </div>
        
                        <div class="mt-8 p-6 bg-blue-50 rounded-xl border border-blue-100 text-center">
                           <h5 class="font-bold text-blue-900 mb-2">Explore Full Methodology</h5>
                           <p class="text-sm text-blue-800 mb-4">Access the complete interactive guide with 40+ methods on the official portal.</p>
                           <a href="https://www.3ieimpact.org/pir-methods" target="_blank" class="inline-flex items-center gap-2 font-bold text-blue-600 hover:text-blue-800">
                               Open Full Menu <span class="icon-external-link"></span>
                           </a>
                        </div>
                    </div>
                `,
                category: ["Tools and methods"],
                audience: ["For Researchers", "For Evaluators"],
                icon: "menu",
                featured: false,
                url: "https://www.3ieimpact.org/pir-methods",
                totalPages: 24,
                useIframe: false
            },
            {
                id: 6,
                title: "Journal of Development Effectiveness",
                description: "Publishes original papers reporting high-quality research on the effectiveness of development interventions.",
                longDescription: `
                    <div class="space-y-6">
                        <img src="https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?auto=format&fit=crop&w=800&q=80" alt="Journal" class="w-full h-40 object-cover rounded-xl opacity-80" />
                        <p class="text-gray-700">The <em>Journal of Development Effectiveness</em> publishes papers reporting evidence of the effectiveness of development interventions and the methodology of impact evaluation.</p>
                        <div>
                            <h4 class="font-bold text-gray-900 mb-2">Recent Issues Focus On:</h4>
                            <ul class="list-disc pl-5 space-y-2 text-gray-600">
                                <li>Microfinance effectiveness in rural settings</li>
                                <li>Educational interventions in post-conflict zones</li>
                                <li>Methodological advances in quasi-experimental designs</li>
                            </ul>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-lg text-sm text-gray-600 italic">
                            "The go-to journal for rigorous impact evaluation studies."
                        </div>
                    </div>
                `,
                category: ["Learning and reference"],
                audience: ["For Researchers", "For Academics"],
                icon: "book-open-text",
                featured: false,
                url: "https://www.3ieimpact.org/resources/journal-of-development-effectiveness",
                totalPages: 12,
                useIframe: false
            },
            {
                id: 7,
                title: "Remote Sensing Inventory",
                description: "A catalogue of remote sensing applications for impact evaluations in developing countries.",
                longDescription: `
                    <div class="space-y-6">
                        <p class="text-gray-700">This inventory catalogues studies that have used remote sensing data (satellite imagery, drone data, etc.) for impact measurement. It is a vital resource for researchers looking to employ novel data collection methods.</p>
                        <div class="bg-slate-900 text-slate-300 p-6 rounded-xl font-mono text-sm overflow-hidden relative">
                            <div class="absolute top-0 right-0 p-4 opacity-20">
                                <div class="icon-satellite text-6xl"></div>
                            </div>
                            <div class="mb-4 text-white font-bold border-b border-slate-700 pb-2">Data Types Indexed</div>
                            <ul class="space-y-2">
                                <li>> Satellite Imagery (Optical/Radar)</li>
                                <li>> Drone / UAV Footage</li>
                                <li>> Nighttime Lights Data</li>
                                <li>> Land Cover Classification</li>
                            </ul>
                        </div>
                    </div>
                `,
                category: ["Databases", "Tools and methods"],
                audience: ["For Researchers"],
                icon: "satellite",
                featured: false,
                url: "https://www.3ieimpact.org/resources/remote-sensing-inventory",
                totalPages: 67,
                useIframe: false
            },
            {
                id: 8,
                title: "Video Lecture Series",
                description: "Educational videos covering various topics in impact evaluation methodologies and practice.",
                longDescription: `
                    <div class="space-y-6">
                        <p class="text-gray-700">In 2014, 3ie and the Asian Development Bank developed a joint video lecture series as a primer for those interested in evaluations. Lectures 1-6 cover core concepts.</p>
                        <div class="grid grid-cols-1 gap-3">
                            <div class="flex gap-4 p-3 hover:bg-gray-50 rounded-lg transition-colors cursor-pointer border border-transparent hover:border-gray-200">
                                <div class="w-24 h-16 bg-gray-200 rounded-md flex-shrink-0 flex items-center justify-center relative overflow-hidden">
                                     <div class="absolute inset-0 bg-black/10"></div>
                                     <div class="icon-circle-play text-white text-2xl relative z-10"></div>
                                </div>
                                <div>
                                    <div class="font-bold text-gray-900 text-sm">Lecture 1: What is impact evaluation?</div>
                                    <div class="text-xs text-gray-500 mt-1">Prof. Howard White • Why simple change measurement fails</div>
                                </div>
                            </div>
                            <div class="flex gap-4 p-3 hover:bg-gray-50 rounded-lg transition-colors cursor-pointer border border-transparent hover:border-gray-200">
                                <div class="w-24 h-16 bg-gray-200 rounded-md flex-shrink-0 flex items-center justify-center relative overflow-hidden">
                                     <div class="absolute inset-0 bg-black/10"></div>
                                     <div class="icon-circle-play text-white text-2xl relative z-10"></div>
                                </div>
                                <div>
                                    <div class="font-bold text-gray-900 text-sm">Lecture 2: The Theory of Change</div>
                                    <div class="text-xs text-gray-500 mt-1">Prof. Howard White • Foundations of rigorous evaluation</div>
                                </div>
                            </div>
                             <div class="flex gap-4 p-3 hover:bg-gray-50 rounded-lg transition-colors cursor-pointer border border-transparent hover:border-gray-200">
                                <div class="w-24 h-16 bg-gray-200 rounded-md flex-shrink-0 flex items-center justify-center relative overflow-hidden">
                                     <div class="absolute inset-0 bg-black/10"></div>
                                     <div class="icon-circle-play text-white text-2xl relative z-10"></div>
                                </div>
                                <div>
                                    <div class="font-bold text-gray-900 text-sm">Lecture 3: Intro to RCTs</div>
                                    <div class="text-xs text-gray-500 mt-1">Annette Brown • Creating valid counterfactuals</div>
                                </div>
                            </div>
                        </div>
                    </div>
                `,
                category: ["Learning and reference"],
                audience: ["For Students", "For Researchers"],
                icon: "film",
                featured: false,
                url: "https://www.3ieimpact.org/resources/video-lecture-series",
                totalPages: 12,
                useIframe: false
            },
            {
                id: 9,
                title: "International Development Coordinating Group",
                description: "Promoting the production and use of evidence to improve social and economic development.",
                longDescription: `
                    <div class="space-y-6">
                        <p class="text-gray-700">The IDCG is a network within the Campbell Collaboration. We coordinate the production of high-quality systematic reviews of social and economic interventions in low- and middle-income countries.</p>
                        <div class="border-l-4 border-blue-500 pl-4 py-2 bg-blue-50/50">
                            <h5 class="font-bold text-blue-900 text-sm uppercase mb-1">Our Mission</h5>
                            <p class="text-sm text-blue-800 italic">To improve the quality of life for people in developing countries by informing policy with evidence.</p>
                        </div>
                        <div>
                            <h4 class="font-bold text-gray-900 mb-2">Activities</h4>
                            <div class="flex flex-wrap gap-2">
                                <span class="px-3 py-1 bg-gray-100 rounded-full text-xs font-medium text-gray-600">Training</span>
                                <span class="px-3 py-1 bg-gray-100 rounded-full text-xs font-medium text-gray-600">Editorial Services</span>
                                <span class="px-3 py-1 bg-gray-100 rounded-full text-xs font-medium text-gray-600">Peer Review</span>
                                <span class="px-3 py-1 bg-gray-100 rounded-full text-xs font-medium text-gray-600">Dissemination</span>
                            </div>
                        </div>
                    </div>
                `,
                category: ["Community and groups"],
                audience: ["For Researchers", "For Policymakers"],
                icon: "globe",
                featured: false,
                url: "https://www.3ieimpact.org/resources/International-Development-Coordinating-Group",
                totalPages: 34,
                useIframe: false
            }
        ];

        // --- 2. Components ---

        function PeekModal({ resource, isOpen, onClose }) {
            if (!isOpen || !resource) return null;

            return (
                <div className="fixed inset-0 z-[100] flex items-center justify-center p-4 md:p-6" role="dialog" aria-modal="true">

                    {/* Backdrop with Fade In */}
                    <div
                        className="absolute inset-0 bg-black/40 backdrop-blur-sm animate-fade-in"
                        onClick={onClose}
                    ></div>

                    {/* Modal Content with Scale Up */}
                    <div className="relative w-full max-w-4xl bg-white rounded-2xl shadow-2xl overflow-hidden max-h-[90vh] flex flex-col md:flex-row animate-scale-up">

                        {/* Close Button */}
                        <button
                            onClick={onClose}
                            className="absolute top-4 right-4 z-20 p-2 rounded-full bg-white/80 hover:bg-gray-100 text-gray-500 transition-colors"
                        >
                            <div className="icon-x text-xl"></div>
                        </button>

                        {/* Left Side: Preview or Image */}
                        <div className="w-full md:w-1/2 bg-gray-50 border-r border-gray-100 relative">
                            {/* Simple visual fallback if no image/iframe needed immediately, or resource specific preview */}
                            <div className="absolute inset-0 flex items-center justify-center p-8 text-center">
                                <div className="max-w-xs">
                                    <div className={`w-20 h-20 mx-auto bg-blue-100 rounded-2xl flex items-center justify-center mb-6`}>
                                        <div className={`icon-${resource.icon} text-4xl text-[var(--primary-blue)]`}></div>
                                    </div>
                                    <h3 className="text-xl font-bold text-gray-900 mb-2">{resource.title}</h3>
                                    <div className="flex flex-wrap gap-2 justify-center mt-4">
                                        {resource.category.map((cat, i) => (
                                            <span key={i} className="px-2 py-1 bg-white border border-gray-200 rounded text-xs font-medium text-gray-600 uppercase tracking-wider">
                                                {cat}
                                            </span>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Right Side: Details & Actions */}
                        <div className="w-full md:w-1/2 flex flex-col h-full bg-white relative z-10">
                            <div className="flex-1 overflow-y-auto custom-scrollbar p-8">
                                <div className="mb-2">
                                    <span className="text-xs font-bold text-[var(--primary-blue)] tracking-wider uppercase">Quick Preview</span>
                                </div>
                                <h2 className="text-2xl md:text-3xl font-black text-gray-900 mb-4 leading-tight">{resource.title}</h2>

                                <div className="prose prose-sm text-gray-600 mb-8">
                                    {/* Render HTML content safely */}
                                    {resource.longDescription
                                        ? <div dangerouslySetInnerHTML={{ __html: resource.longDescription }} />
                                        : <p>{resource.description}</p>
                                    }
                                </div>

                                <div className="flex flex-col gap-3">
                                    <div className="flex items-center gap-3 text-sm text-gray-500">
                                        <div className="icon-users w-4"></div>
                                        <span>Target Audience: <strong>{resource.audience.join(", ")}</strong></span>
                                    </div>
                                    {resource.totalPages && (
                                        <div className="flex items-center gap-3 text-sm text-gray-500">
                                            <div className="icon-file-text w-4"></div>
                                            <span>Content Volume: <strong>{resource.totalPages.toLocaleString()} items</strong></span>
                                        </div>
                                    )}
                                </div>
                            </div>

                            {/* Footer Actions */}
                            <div className="p-6 border-t border-gray-100 bg-gray-50 flex items-center gap-4 justify-between sticky bottom-0">
                                <button onClick={onClose} className="text-sm font-semibold text-gray-500 hover:text-gray-800 transition-colors">
                                    Close
                                </button>
                                <a
                                    href={resource.url}
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    className="btn btn-primary shadow-lg shadow-blue-500/20 group"
                                >
                                    Access Resource
                                    <span className="icon-external-link ml-2 group-hover:translate-x-0.5 transition-transform"></span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        function ResourceOverlay({ resource, onClose }) {
            const iframeRef = React.useRef(null);
            const [isLoading, setIsLoading] = React.useState(true);

            React.useEffect(() => {
                // Prevent body scroll when overlay is open
                document.body.style.overflow = 'hidden';
                return () => {
                    document.body.style.overflow = 'unset';
                };
            }, []);

            const handleIframeLoad = () => {
                setIsLoading(false);
            };

            if (!resource) return null;

            return (
                <div className="fixed inset-0 z-[100] bg-white flex flex-col animate-fade-in">
                    {/* Header Toolbar */}
                    <div className="h-16 bg-white border-b border-gray-200 flex items-center justify-between px-4 md:px-6 shadow-sm z-20">
                        <div className="flex items-center gap-4">
                            <button
                                onClick={onClose}
                                className="p-2 hover:bg-gray-100 rounded-full transition-colors text-gray-500"
                                title="Close Preview"
                            >
                                <div className="icon-x text-xl"></div>
                            </button>
                            <div className="w-px h-6 bg-gray-200"></div>
                            <div className="flex items-center gap-3">
                                <div className="w-8 h-8 rounded bg-[var(--primary-blue)] text-white flex items-center justify-center">
                                    <div className={`icon-${resource.icon} text-sm`}></div>
                                </div>
                                <div className="hidden md:block">
                                    <h3 className="font-bold text-gray-900 text-sm leading-tight">{resource.title}</h3>
                                    <p className="text-xs text-gray-500 truncate max-w-[300px]">{resource.url}</p>
                                </div>
                            </div>
                        </div>

                        <div className="flex items-center gap-3">
                            <a
                                href={resource.url}
                                target="_blank"
                                rel="noopener noreferrer"
                                className="btn btn-primary py-2 px-4 text-sm"
                            >
                                Open in New Tab
                                <div className="icon-external-link ml-2 text-xs"></div>
                            </a>
                        </div>
                    </div>

                    {/* Main Content Area */}
                    <div className="flex-1 relative bg-gray-50 overflow-hidden">
                        {/* Loading State */}
                        {isLoading && (
                            <div className="absolute inset-0 flex items-center justify-center z-10 bg-white">
                                <div className="flex flex-col items-center">
                                    <div className="w-10 h-10 border-4 border-blue-100 border-t-[var(--primary-blue)] rounded-full animate-spin mb-4"></div>
                                    <p className="text-gray-500 font-medium animate-pulse">Loading {resource.title}...</p>
                                </div>
                            </div>
                        )}

                        {/* Iframe for Content */}
                        <iframe
                            ref={iframeRef}
                            src={resource.url}
                            className="w-full h-full border-0"
                            title={`Preview of ${resource.title}`}
                            onLoad={handleIframeLoad}
                            allow="accelerometer; autoplay; clipboard-write; encrypted-in; gyroscope; picture-in-picture"
                            sandbox="allow-same-origin allow-scripts allow-popups allow-forms"
                        />
                    </div>
                </div>
            );
        }

        function Header() {
            const [isScrolled, setIsScrolled] = React.useState(false);
            const [isMobileMenuOpen, setIsMobileMenuOpen] = React.useState(false);

            React.useEffect(() => {
                const handleScroll = () => {
                    setIsScrolled(window.scrollY > 10);
                };
                window.addEventListener('scroll', handleScroll);
                return () => window.removeEventListener('scroll', handleScroll);
            }, []);

            return (
                <header
                    className={`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${isScrolled ? 'bg-white/95 backdrop-blur-md shadow-sm py-3' : 'bg-white py-5'}`}
                >
                    <div className="container-custom">
                        <div className="flex items-center justify-between">
                            {/* Logo Area */}
                            <a href="#" className="flex items-center gap-3 group">
                                <div className="bg-[var(--primary-blue)] text-white p-2 rounded-lg group-hover:bg-[#002f6c] transition-colors">
                                    {/* Placeholder for 3ie Logo SVG/Icon */}
                                    <div className="text-2xl font-bold font-serif tracking-tighter leading-none">3ie</div>
                                </div>
                                <div className="hidden md:block leading-tight">
                                    <div className="font-bold text-[var(--primary-blue)] text-sm uppercase tracking-wide">International</div>
                                    <div className="font-bold text-[var(--primary-blue)] text-sm uppercase tracking-wide">Initiative for</div>
                                    <div className="font-bold text-[var(--primary-blue)] text-sm uppercase tracking-wide">Impact Evaluation</div>
                                </div>
                            </a>

                            {/* Desktop Nav */}
                            <nav className="hidden lg:flex items-center gap-8 font-medium text-gray-600">
                                <a href="#" className="hover:text-[var(--primary-blue)] transition-colors">About</a>
                                <a href="#" className="hover:text-[var(--primary-blue)] transition-colors">Services</a>
                                <a href="#" className="hover:text-[var(--primary-blue)] transition-colors">Research</a>
                                <div className="relative group cursor-pointer h-full flex items-center">
                                    <span className="flex items-center gap-1 text-[var(--primary-blue)] font-bold">
                                        Evidence Hub <div className="icon-chevron-down w-4 h-4 transition-transform group-hover:rotate-180"></div>
                                    </span>
                                    {/* Dropdown would go here */}
                                </div>
                            </nav>

                            {/* Right Actions */}
                            <div className="hidden lg:flex items-center gap-6">
                                <div className="flex items-center gap-4 text-xs font-bold text-gray-400 uppercase tracking-wider">
                                    <a href="#" className="hover:text-gray-600 transition-colors">Blogs</a>
                                    <a href="#" className="hover:text-gray-600 transition-colors">Careers</a>
                                    <a href="#" className="hover:text-gray-600 transition-colors">Events</a>
                                    <a href="#" className="hover:text-gray-600 transition-colors">Media</a>
                                    <a href="#" className="hover:text-gray-600 transition-colors">Newsletter</a>
                                    <a href="#" className="text-white bg-black px-2 py-1 rounded hover:bg-gray-800 transition-colors">Resources</a>
                                    <a href="#" className="hover:text-gray-600 transition-colors">Donate</a>
                                </div>
                                <button className="p-2 hover:bg-gray-100 rounded-full transition-colors">
                                    <div className="icon-search text-xl text-gray-500"></div>
                                </button>
                                <a href="#" className="btn btn-primary rounded-full px-8">Impact</a>
                            </div>

                            {/* Mobile Menu Toggle */}
                            <button
                                className="lg:hidden p-2 text-gray-600"
                                onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}
                            >
                                <div className="icon-menu text-2xl"></div>
                            </button>
                        </div>
                    </div>
                </header>
            );
        }

        function Hero({ categoryFilter, audienceFilter }) {
            const [selectedResourceId, setSelectedResourceId] = React.useState(null);
            const [count, setCount] = React.useState(0);

            // Find the Development Evidence Portal resource (id: 1)
            const editorChoiceResource = resourcesData.find(r => r.id === 1);
            const activeResource = resourcesData.find(r => r.id === selectedResourceId);

            const handleOpen = (id) => setSelectedResourceId(id);
            const handleClose = () => setSelectedResourceId(null);

            // Animated counter from 0 to 20000
            React.useEffect(() => {
                const duration = 2000; // 2 seconds
                const target = 20000;
                const increment = target / (duration / 16); // 60fps
                let current = 0;

                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        setCount(target);
                        clearInterval(timer);
                    } else {
                        setCount(Math.floor(current));
                    }
                }, 16);

                return () => clearInterval(timer);
            }, []);

            // Helper to determine breadcrumb text
            const showCategory = categoryFilter && categoryFilter !== "All";
            const showAudience = audienceFilter && audienceFilter !== "All";

            return (
                <section className="relative bg-[var(--secondary-bg)] pt-12 pb-24 lg:pt-20 lg:pb-32 overflow-visible">
                    {/* Background Pattern */}
                    <div className="absolute inset-0 bg-grid-pattern opacity-30 pointer-events-none"></div>

                    {/* Gradient Overlay for depth */}
                    <div className="absolute inset-0 bg-gradient-to-b from-transparent via-[var(--secondary-bg)]/50 to-[var(--secondary-bg)] pointer-events-none"></div>

                    <div className="container-custom relative z-10">
                        <div className="grid lg:grid-cols-2 gap-12 items-center">
                            {/* Text Content */}
                            <div className="space-y-8">
                                {/* Breadcrumbs - Moved to Top */}
                                <nav className="flex items-center text-sm text-gray-500 animate-fade-in mb-2 flex-wrap">
                                    <a href="#" className="hover:text-[var(--primary-blue)] transition-colors">Home</a>
                                    <span className="mx-2 text-gray-300">/</span>
                                    <span className={`transition-colors ${!showCategory && !showAudience ? "text-gray-900 font-medium" : "hover:text-[var(--primary-blue)]"}`}>Resources</span>

                                    {showCategory && (
                                        <>
                                            <span className="mx-2 text-gray-300">/</span>
                                            <span className={`transition-colors ${!showAudience ? "text-gray-900 font-medium" : ""}`}>
                                                {categoryFilter}
                                            </span>
                                        </>
                                    )}

                                    {showAudience && (
                                        <>
                                            <span className="mx-2 text-gray-300">/</span>
                                            <span className="font-semibold text-[var(--primary-blue)]">
                                                {audienceFilter}
                                            </span>
                                        </>
                                    )}
                                </nav>

                                <div className="inline-flex items-center px-4 py-1.5 rounded-full bg-blue-100/80 backdrop-blur-sm text-[var(--primary-blue)] text-sm font-bold tracking-wide mb-4 border border-blue-200 animate-bounce-subtle">
                                    <div className="icon-sparkles mr-2 text-sm"></div>
                                    3ie Resources
                                </div>

                                <h1 className="text-4xl lg:text-5xl font-black text-gray-900 leading-[1.15] tracking-tight">
                                    Evidence that <br />
                                    <span className="text-[var(--primary-blue)] relative inline-block">
                                        improves lives.
                                        <svg className="absolute w-full h-3 -bottom-1 left-0 text-yellow-300 opacity-60 -z-10" viewBox="0 0 100 10" preserveAspectRatio="none">
                                            <path d="M0 5 Q 50 10 100 5" stroke="currentColor" strokeWidth="8" fill="none" />
                                        </svg>
                                    </span>
                                </h1>
                                <p className="text-lg text-gray-600 max-w-lg leading-relaxed">
                                    Access our curated collection of over <strong className="inline-block min-w-[80px] tabular-nums">{count.toLocaleString()}+</strong> rigorous impact evaluations, datasets, and practical manuals designed to empower researchers and policymakers.
                                </p>
                                <div className="flex flex-col gap-4 pt-2">
                                    <a href="#resources-grid" className="btn btn-primary shadow-xl shadow-blue-600/20 hover:shadow-blue-600/40 transform hover:-translate-y-0.5 transition-all inline-flex items-center justify-center w-fit group">
                                        Explore Resources
                                        <span className="icon-arrow-right ml-2 group-hover:translate-x-1 transition-transform"></span>
                                    </a>
                                    <div className="flex items-center gap-2 text-xs text-gray-600">
                                        <div className="icon-trending-up text-base text-orange-500"></div>
                                        <span className="font-medium">Trending:</span>
                                        <a href="#" className="text-[var(--primary-blue)] hover:underline">Evidence Gap Maps</a>
                                        <span className="text-gray-400">•</span>
                                        <a href="#" className="text-[var(--primary-blue)] hover:underline">Impact Evaluations</a>
                                    </div>
                                </div>
                            </div>

                            {/* Spotlight Card - Dynamic Stacking Effect - NO 3D TILT */}
                            <div className="relative group lg:mt-10 lg:translate-y-12 z-20">
                                {/* Decorative glow behind card */}
                                <div className="absolute -inset-0.5 bg-gradient-to-r from-blue-400 to-indigo-400 rounded-2xl blur opacity-30 group-hover:opacity-60 transition duration-1000 group-hover:duration-200 animate-pulse"></div>

                                <div
                                    className="relative bg-white rounded-xl shadow-2xl overflow-hidden border border-gray-100 transform transition-all duration-300 group-hover:scale-[1.01] cursor-pointer"
                                    onClick={() => handleOpen(1)}
                                >
                                    <div className="bg-[var(--primary-blue)] px-6 py-4 flex justify-between items-center relative overflow-hidden">
                                        <div className="absolute inset-0 bg-black/5"></div>
                                        <div className="absolute -right-6 -top-6 w-24 h-24 bg-white/10 rounded-full blur-xl"></div>

                                        <span className="text-white font-bold tracking-wide text-xs uppercase flex items-center relative z-10">
                                            <div className="icon-star mr-2 text-yellow-300 fill-current"></div>
                                            Editor's Choice
                                        </span>
                                    </div>

                                    <div className="p-8">
                                        <div className="flex items-start gap-6 mb-6">
                                            <div className="w-16 h-16 bg-blue-50 rounded-2xl flex items-center justify-center flex-shrink-0 border border-blue-100">
                                                <div className="icon-database text-3xl text-[var(--primary-blue)]"></div>
                                            </div>
                                            <div>
                                                <h3 className="text-2xl font-bold text-gray-900 mb-2">Development Evidence Portal</h3>
                                                <div className="flex flex-wrap gap-2">
                                                    <span className="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                                        Active Dataset
                                                    </span>
                                                    <span className="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                                                        Updated Monthly
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <p className="text-gray-600 mb-8 leading-relaxed border-b border-gray-100 pb-6">
                                            The world's most comprehensive repository of impact evaluations and systematic reviews. Search, filter, and visualize evidence on what works in international development.
                                        </p>

                                        <div className="flex items-center justify-between mt-auto pt-4 border-t border-gray-100/50">
                                            <div className="flex items-center gap-2 text-gray-500">
                                                <div className="icon-server text-sm"></div>
                                                <span className="text-sm font-medium">{editorChoiceResource.category[0]}</span>
                                            </div>
                                            <span className="flex items-center gap-2 text-[var(--primary-blue)] font-bold text-sm group-hover/link:gap-3 transition-all">
                                                View Resource
                                                <div className="icon-arrow-right w-4 h-4"></div>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* PeekModal */}
                    <PeekModal
                        resource={activeResource}
                        isOpen={!!selectedResourceId}
                        onClose={handleClose}
                    />
                </section>
            );
        }

        function ResourceGrid({ categoryFilter, setCategoryFilter, audienceFilter, setAudienceFilter }) {
            const [activeTab, setActiveTab] = React.useState("Grid");
            const [searchTerm, setSearchTerm] = React.useState("");
            const [selectedResourceId, setSelectedResourceId] = React.useState(null);
            const [activeOverlayId, setActiveOverlayId] = React.useState(null);


            // Unique Categories & Audiences
            const allCategories = ["All", ...new Set(resourcesData.flatMap(r => r.category))];
            const allAudiences = ["All", ...new Set(resourcesData.flatMap(r => r.audience))];

            // Filter Logic
            const filteredResources = resourcesData.filter(resource => {
                const matchesCategory = categoryFilter === "All" || resource.category.includes(categoryFilter);
                const matchesAudience = audienceFilter === "All" || resource.audience.includes(audienceFilter);
                const matchesSearch = resource.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    resource.description.toLowerCase().includes(searchTerm.toLowerCase());

                return matchesCategory && matchesAudience && matchesSearch;
            });

            const handlePeek = (id) => {
                setSelectedResourceId(id);
            };

            const handleAccess = (id) => {
                const resource = resourcesData.find(r => r.id === id);
                if (resource && resource.useIframe) {
                    setActiveOverlayId(id);
                } else if (resource) {
                    window.open(resource.url, '_blank');
                }
            };

            const activeResource = resourcesData.find(r => r.id === selectedResourceId);
            const overlayResource = resourcesData.find(r => r.id === activeOverlayId);

            return (
                <section id="resources-grid" className="py-20 relative bg-white">
                    <div className="container-custom">

                        {/* Section Header */}
                        <div className="text-center max-w-3xl mx-auto mb-16">
                            <h2 className="text-3xl lg:text-4xl font-black text-gray-900 mb-6">Explore the Evidence</h2>
                            <p className="text-lg text-gray-600">
                                Filter by topic, audience, or search directly to find the tools you need.
                            </p>
                        </div>

                        {/* Controls Toolbar */}
                        <div className="bg-white rounded-2xl shadow-xl border border-gray-100 p-6 mb-12 sticky top-24 z-30 transition-shadow hover:shadow-2xl">
                            <div className="flex flex-col lg:flex-row gap-6 justify-between items-center">

                                {/* Search */}
                                <div className="relative w-full lg:w-96 group">
                                    <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                        <div className="icon-search text-gray-400 group-focus-within:text-[var(--primary-blue)] transition-colors"></div>
                                    </div>
                                    <input
                                        type="text"
                                        placeholder="Search resources..."
                                        className="w-full pl-11 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-100 focus:border-[var(--primary-blue)] outline-none transition-all"
                                        value={searchTerm}
                                        onChange={(e) => setSearchTerm(e.target.value)}
                                    />
                                </div>

                                {/* Filters */}
                                <div className="flex flex-wrap gap-4 w-full lg:w-auto justify-center lg:justify-end">
                                    {/* Category Select */}
                                    <div className="relative">
                                        <select
                                            className="appearance-none bg-gray-50 border border-gray-200 text-gray-700 py-3 pl-4 pr-10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-[var(--primary-blue)] cursor-pointer font-medium hover:bg-gray-100 transition-colors"
                                            value={categoryFilter}
                                            onChange={(e) => setCategoryFilter(e.target.value)}
                                        >
                                            {allCategories.map(cat => (
                                                <option key={cat} value={cat}>{cat}</option>
                                            ))}
                                        </select>
                                        <div className="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-gray-500">
                                            <div className="icon-chevron-down w-4 h-4"></div>
                                        </div>
                                    </div>

                                    {/* Audience Select */}
                                    <div className="relative">
                                        <select
                                            className="appearance-none bg-gray-50 border border-gray-200 text-gray-700 py-3 pl-4 pr-10 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-[var(--primary-blue)] cursor-pointer font-medium hover:bg-gray-100 transition-colors"
                                            value={audienceFilter}
                                            onChange={(e) => setAudienceFilter(e.target.value)}
                                        >
                                            {allAudiences.map(aud => (
                                                <option key={aud} value={aud}>{aud}</option>
                                            ))}
                                        </select>
                                        <div className="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-gray-500">
                                            <div className="icon-chevron-down w-4 h-4"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Results Grid */}
                        {filteredResources.length > 0 ? (
                            <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                                {filteredResources.map((resource, index) => (
                                    <div
                                        key={resource.id}
                                        className="group bg-white rounded-2xl border border-gray-100 hover:border-blue-100 shadow-sm hover:shadow-xl transition-all duration-300 flex flex-col overflow-hidden relative"
                                        style={{ animationDelay: `${index * 50}ms` }}
                                    >
                                        {/* Featured Badge */}
                                        {resource.featured && (
                                            <div className="absolute top-4 right-4 z-10">
                                                <span className="bg-yellow-100 text-yellow-800 text-[10px] font-bold px-2 py-1 rounded-full uppercase tracking-wide border border-yellow-200 shadow-sm">
                                                    Featured
                                                </span>
                                            </div>
                                        )}

                                        <div className="p-8 flex-1 flex flex-col">
                                            {/* Icon Header */}
                                            <div className="mb-6 flex justify-between items-start">
                                                <div className="w-14 h-14 bg-gray-50 rounded-2xl flex items-center justify-center group-hover:scale-110 group-hover:bg-blue-50 transition-all duration-300 border border-gray-100 group-hover:border-blue-100">
                                                    <div className={`icon-${resource.icon} text-2xl text-[var(--primary-blue)]`}></div>
                                                </div>
                                            </div>

                                            <h3 className="text-xl font-bold text-gray-900 mb-3 group-hover:text-[var(--primary-blue)] transition-colors line-clamp-2">
                                                {resource.title}
                                            </h3>
                                            <p className="text-gray-500 text-sm leading-relaxed mb-6 line-clamp-3">
                                                {resource.description}
                                            </p>

                                            <div className="mt-auto flex items-center gap-2 flex-wrap mb-6">
                                                {resource.category.map((cat, i) => (
                                                    <span key={i} className="px-2.5 py-1 bg-gray-50 text-gray-600 text-xs font-semibold rounded-md border border-gray-100">
                                                        {cat}
                                                    </span>
                                                ))}
                                            </div>

                                            {/* Action Area */}
                                            <div className="pt-6 border-t border-gray-50 flex items-center justify-between">
                                                <button
                                                    onClick={() => handlePeek(resource.id)}
                                                    className="text-sm font-semibold text-gray-500 hover:text-gray-900 transition-colors flex items-center gap-2"
                                                >
                                                    <div className="icon-eye w-4"></div>
                                                    Quick Look
                                                </button>

                                                <button
                                                    onClick={() => handleAccess(resource.id)}
                                                    className="w-10 h-10 rounded-full bg-gray-50 flex items-center justify-center text-[var(--primary-blue)] group-hover:bg-[var(--primary-blue)] group-hover:text-white transition-all shadow-sm group-hover:shadow-md transform group-hover:-translate-y-1"
                                                    title="Access Resource"
                                                >
                                                    <div className="icon-arrow-right text-lg"></div>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        ) : (
                            <div className="text-center py-20 bg-gray-50 rounded-3xl border-2 border-dashed border-gray-200">
                                <div className="text-gray-400 text-6xl mb-4 icon-search"></div>
                                <h3 className="text-xl font-bold text-gray-900 mb-2">No resources found</h3>
                                <p className="text-gray-500">Try adjusting your filters or search term.</p>
                                <button
                                    onClick={() => { setCategoryFilter("All"); setAudienceFilter("All"); setSearchTerm(""); }}
                                    className="mt-6 text-[var(--primary-blue)] font-bold hover:underline"
                                >
                                    Clear all filters
                                </button>
                            </div>
                        )}

                    </div>

                    {/* Peek Modal */}
                    <PeekModal
                        resource={activeResource}
                        isOpen={!!selectedResourceId}
                        onClose={() => setSelectedResourceId(null)}
                    />

                    {/* Full Overlay */}
                    {activeOverlayId && (
                        <ResourceOverlay
                            resource={overlayResource}
                            onClose={() => setActiveOverlayId(null)}
                        />
                    )}
                </section>
            );
        }

        function Newsletter() {
            return (
                <section className="py-24 bg-[var(--primary-blue)] relative overflow-hidden">
                    {/* Background Accents */}
                    <div className="absolute top-0 right-0 w-96 h-96 bg-white/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"></div>
                    <div className="absolute bottom-0 left-0 w-64 h-64 bg-white/5 rounded-full blur-2xl translate-y-1/2 -translate-x-1/2"></div>

                    <div className="container-custom relative z-10">
                        <div className="max-w-4xl mx-auto text-center">
                            <h2 className="text-3xl lg:text-4xl font-black text-white mb-6 tracking-tight">
                                Stay at the forefront of development evidence.
                            </h2>
                            <p className="text-blue-100 text-lg mb-10 max-w-2xl mx-auto leading-relaxed">
                                Join 50,000+ researchers and policymakers. Get the latest impact evaluations, systematic reviews, and funding opportunities delivered to your inbox.
                            </p>

                            <form className="flex flex-col sm:flex-row gap-4 justify-center max-w-lg mx-auto">
                                <input
                                    type="email"
                                    placeholder="Enter your email address"
                                    className="flex-1 px-6 py-4 rounded-xl border-0 focus:ring-4 focus:ring-blue-400/30 outline-none text-gray-900 shadow-lg"
                                    required
                                />
                                <button type="submit" className="bg-white text-[var(--primary-blue)] font-bold px-8 py-4 rounded-xl shadow-lg hover:bg-gray-50 transition-all transform hover:-translate-y-1 active:translate-y-0">
                                    Subscribe Free
                                </button>
                            </form>

                            <p className="mt-6 text-xs text-blue-200/60">
                                No spam, ever. Unsubscribe at any time.
                            </p>
                        </div>
                    </div>
                </section>
            );
        }

        function Footer() {
            return (
                <footer className="bg-gray-900 text-white pt-20 pb-10 border-t border-gray-800">
                    <div className="container-custom">
                        <div className="grid md:grid-cols-4 gap-12 mb-16">

                            {/* Brand */}
                            <div className="col-span-1 md:col-span-2">
                                <div className="flex items-center gap-3 mb-6">
                                    <div className="bg-white text-[var(--primary-blue)] p-2 rounded-lg font-bold font-serif text-xl">3ie</div>
                                    <span className="font-bold text-lg tracking-wide">International Initiative for Impact Evaluation</span>
                                </div>
                                <p className="text-gray-400 leading-relaxed max-w-md mb-8">
                                    Improving lives through evidence-informed policy and practice. We support the generation and use of high-quality evidence to address development challenges.
                                </p>
                                <div className="flex gap-4">
                                    <a href="#" className="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center hover:bg-[var(--primary-blue)] transition-colors">
                                        <div className="icon-facebook text-white"></div>
                                    </a>
                                    <a href="#" className="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center hover:bg-[var(--primary-blue)] transition-colors">
                                        <div className="icon-twitter text-white"></div>
                                    </a>
                                    <a href="#" className="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center hover:bg-[var(--primary-blue)] transition-colors">
                                        <div className="icon-linkedin text-white"></div>
                                    </a>
                                    <a href="#" className="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center hover:bg-[var(--primary-blue)] transition-colors">
                                        <div className="icon-youtube text-white"></div>
                                    </a>
                                </div>
                            </div>

                            {/* Quick Links */}
                            <div>
                                <h4 className="font-bold text-lg mb-6 text-gray-200">Organization</h4>
                                <ul className="space-y-4 text-gray-400">
                                    <li><a href="#" className="hover:text-white transition-colors">About Us</a></li>
                                    <li><a href="#" className="hover:text-white transition-colors">Our Team</a></li>
                                    <li><a href="#" className="hover:text-white transition-colors">Careers</a></li>
                                    <li><a href="#" className="hover:text-white transition-colors">Contact</a></li>
                                    <li><a href="#" className="hover:text-white transition-colors">Privacy Policy</a></li>
                                </ul>
                            </div>

                            {/* Resources */}
                            <div>
                                <h4 className="font-bold text-lg mb-6 text-gray-200">Resources</h4>
                                <ul className="space-y-4 text-gray-400">
                                    <li><a href="#" className="hover:text-white transition-colors">Evidence Hub</a></li>
                                    <li><a href="#" className="hover:text-white transition-colors">Development Evidence Portal</a></li>
                                    <li><a href="#" className="hover:text-white transition-colors">Impact Evaluation Registry</a></li>
                                    <li><a href="#" className="hover:text-white transition-colors">Data Services</a></li>
                                </ul>
                            </div>
                        </div>

                        <div className="pt-8 border-t border-gray-800 flex flex-col md:flex-row justify-between items-center gap-4 text-sm text-gray-500">
                            <p>© 2024 3ie Impact. All rights reserved.</p>
                            <p>Designed for Impact.</p>
                        </div>
                    </div>
                </footer>
            );
        }

        // --- 3. App Implementation ---

        // Important: DO NOT remove this `ErrorBoundary` component.
        class ErrorBoundary extends React.Component {
            constructor(props) {
                super(props);
                this.state = { hasError: false, error: null };
            }

            static getDerivedStateFromError(error) {
                return { hasError: true, error };
            }

            componentDidCatch(error, errorInfo) {
                console.error('ErrorBoundary caught an error:', error, errorInfo.componentStack);
            }

            render() {
                if (this.state.hasError) {
                    return (
                        <div className="min-h-screen flex items-center justify-center bg-gray-50">
                            <div className="text-center">
                                <h1 className="text-2xl font-bold text-gray-900 mb-4">Something went wrong</h1>
                                <p className="text-gray-600 mb-4">We're sorry, but something unexpected happened.</p>
                                <button
                                    onClick={() => window.location.reload()}
                                    className="btn bg-[var(--primary-blue)] text-white px-6 py-2 rounded"
                                >
                                    Reload Page
                                </button>
                            </div>
                        </div>
                    );
                }

                return this.props.children;
            }
        }

        function App() {
            const [categoryFilter, setCategoryFilter] = React.useState("All");
            const [audienceFilter, setAudienceFilter] = React.useState("All");

            try {
                return (
                    <div className="min-h-screen bg-white" data-name="app" data-file="app.js">
                        <Header />
                        <main className="pt-28">
                            <Hero
                                categoryFilter={categoryFilter}
                                audienceFilter={audienceFilter}
                            />
                            {/* SocialProof removed */}
                            <ResourceGrid
                                categoryFilter={categoryFilter}
                                setCategoryFilter={setCategoryFilter}
                                audienceFilter={audienceFilter}
                                setAudienceFilter={setAudienceFilter}
                            />
                            <Newsletter />
                        </main>
                        <Footer />
                    </div>
                );
            } catch (error) {
                console.error('App component error:', error);
                return null;
            }
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(
            <ErrorBoundary>
                <App />
            </ErrorBoundary>
        );
    </script>
</body>

</html>